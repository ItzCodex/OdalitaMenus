project:
  name: OdalitaMenus
  description: Advanced yet simple to use inventory api for Spigot plugins

dependencies:
  - compile: com.github.SpigotMC:spigot-api:1.16.5
  - compile: com.github.SpigotMC:spigot-api:1.17.1
  - compile: com.github.SpigotMC:spigot-api:1.18.2
  - compile: com.github.SpigotMC:spigot-api:1.19.4
  - compile: com.github.SpigotMC:spigot-api:1.20.1
  - compile: com.github.SpigotMC:spigot-api:1.20.4
  - compile: com.github.SpigotMC:spigot-api:1.20.5

build:
  script: |
    # Install Java 16, 17, and 21
    sudo apt-get install -y openjdk-16-jdk
    sudo apt-get install -y openjdk-17-jdk
    sudo apt-get install -y openjdk-21-jdk
    
    # Install Maven
    sudo apt-get install -y maven
    
    # Download and run BuildTools with certificate check disabled
    wget --disable-certificate-check -O BuildTools.jar https://hub.spigotmc.org/jenkins/job/BuildTools/lastSuccessfulBuild/artifact/target/BuildTools.jar
    
    # Build with Java 16 for version 1.16.5
    /usr/lib/jvm/java-16-openjdk-amd64/bin/java -jar BuildTools.jar --remapped --compile-if-changed --rev 1.16.5
    
    # Build with Java 17 for versions 1.17.1 to 1.20.4
    /usr/lib/jvm/java-17-openjdk-amd64/bin/java -jar BuildTools.jar --remapped --compile-if-changed --rev 1.17.1
    /usr/lib/jvm/java-17-openjdk-amd64/bin/java -jar BuildTools.jar --remapped --compile-if-changed --rev 1.18.2
    /usr/lib/jvm/java-17-openjdk-amd64/bin/java -jar BuildTools.jar --remapped --compile-if-changed --rev 1.19.4
    /usr/lib/jvm/java-17-openjdk-amd64/bin/java -jar BuildTools.jar --remapped --compile-if-changed --rev 1.20.1
    /usr/lib/jvm/java-17-openjdk-amd64/bin/java -jar BuildTools.jar --remapped --compile-if-changed --rev 1.20.4
    
    # Build with Java 21 for version 1.20.5
    /usr/lib/jvm/java-21-openjdk-amd64/bin/java -jar BuildTools.jar --remapped --compile-if-changed --rev 1.20.5
    
    # Install the project with Maven
    mvn install -Dmaven.javadoc.skip=true -DskipTests